# Дополнительная документация к Smart103

----

## Enums

В программе используются численные перечисления для статусов вызовов и бригад.

### CallsStatuses

Ниже представлены численные эквиваленты статусов вызовов

1. Создан - **0**
2. В очереди - **1**
3. Ожидает выезда - **7**
4. Доезд - **2**
5. Обслуживание - **3**
6. На госпитализации - **4**
7. Прибытие в стационар (прибытие в место госпитализации) - **6**
8. На результате - **5**
9. В архиве - **20**
10. Отложен - **30**

### BrigadeStatuses

Ниже представлены численные эквиваленты статусов бригад

1. На ПС - **0**
2. Доезд - **1**
3. Обслуживание - **2**
4. Госпитализация - **3**
5. Возвращение на ПС - **4**
6. Обязательное возвращение на ПС - **5**
7. Обед - **6**
8. Заправка - **7**
9. Ремонт - **8**
10. Подготовка - **9**
11. Свободна (бригада на решении) - **10**
12. В стационаре - **11**
13. Ожидает выезда - **12**

## Работа с фильтрацией в приложении для глав. врача (sd_mobile)

В API для фильтрации вызовов и бригад используется понятие глобального фильтра.
Фильтрация выполняется путем отправки на API соответствующего ключа (ищи описание в SWAGGER).
Здесь будет представлено описание по работе с конкретными полями, их возможными операторами и значениями.

### CallsFilter

Ниже представлены возможные значения в ключе "field":

1. **status** - Фильтрует вызова по статусу. Для оператора возможны следующие значения:
    1. **in** - проверяет, что вызов находится в диапазоне некоторых статусов. Значения для ключа **value - массив int,
       где каждое значение - численный эквивалент статуса из CallsStatuses**
    2. **notIn** - проверяет, что вызов не находится в диапазоне некоторых статусов. Значения для ключа **value - массив
       int, где каждое значение - численный эквивалент статуса из CallsStatuses**
   ```json
   {
            "field": "status",
            "op": "in",
            "value": [1,2,3,4,5]
   }
   ```

2. **city_station** - Фильтрует вызова по городу. Для оператора возможны следующие значения:
    1. **in** - проверяет, что вызов находится в диапазоне некоторых городов. Значения для ключа **value - массив int,
       где
       каждое значение - id города**
    2. **notIn** - проверяет, что вызов не находится в диапазоне некоторых городов. Значения для ключа **value - массив
       int, где каждое значение - id города**
    ```json
   {
            "field": "city_station",
            "op": "in",
            "value": [1,2]
   }
   ```

3. **priority** - Фильтрует вызова по категории срочности. Для оператора возможны следующие значения:
    1. **in** - проверяет, что вызов находится в диапазоне некоторых категорий срочности. **Значения для ключа value -
       массив int, где каждое значение - 1,2,3 или 4**
    2. **notIn** - проверяет, что вызов не находится в диапазоне некоторых категорий срочности. **Значения для ключа
       value - массив int, где каждое значение - 1,2,3 или 4**
    ```json
   {
            "field": "priority",
            "op": "in",
            "value": [1,2,3,4]
   }
   ```

4. **substation** - Фильтрует вызова по подстанции. Для оператора возможны следующие значения:
    1. **in** - проверяет, что вызов находится в диапазоне подстанций. Значения для ключа **value - массив int, где
       каждое
       значение - id подстанции**
    2. **notIn** - проверяет, что вызов не находится в диапазоне подстанций. Значения для ключа **value - массив int,
       где
       каждое значение - id подстанции**
    ```json
   {
            "field": "substation",
            "op": "in",
            "value": [1,2]
   }
   ```

5. **day_number** - Фильтрует вызова по дневному номеру. Для оператора возможны следующие значения:
    1. **eq** - проверяет, что дневной номер вызова равен некоторому значению. Значения для ключа **value - int (искомый
       дневной номер)**
    ```json
   {
            "field": "day_number",
            "op": "eq",
            "value": 123
   }
   ```
6. **patient_fio** - Фильтрует вызова по фио пациента. Для оператора возможны следующие значения:
    1. **regexI** - проверяет, что фио пациента содержит искомую подстроку на любой позиции игнорируя регистр. Значения
       для ключа **value - string (искомая подстрока)**
    ```json
   {
            "field": "patient_fio",
            "op": "regexI",
            "value": "вАнОв"
   }
   ```
7. **street** - Фильтрует вызова по улице. Для оператора возможны следующие значения:
    1. **regexI** - проверяет, что улица содержит искомую подстроку на любой позиции игнорируя регистр. Значения для
       ключа **value - string (искомая подстрока)**
    ```json
   {
            "field": "street",
            "op": "regexI",
            "value": "ГоГоЛя"
   }
   ```

8. **house** - Фильтрует вызова по номеру дома. Для оператора возможны следующие значения:
    1. **eq** - проверяет, что дневной номер дома равен некоторому значению. Значения для ключа **value - string (
       искомый
       номер дома)**
    ```json
   {
            "field": "house",
            "op": "eq",
            "value": 123
   }
   ```

9. **apartment** - Фильтрует вызова по номеру квартиры. Для оператора возможны следующие значения:
    1. **eq** - проверяет, что дневной номер квартиры равен некоторому значению. Значения для ключа **value - string (
       искомый
       номер квартиры)**
    ```json
   {
            "field": "apartment",
            "op": "eq",
            "value": 123
   }
   ```

### BrigadesFilter

Ниже представлены возможные значения в ключе "field":

1. **status** - Фильтрует бригады по статусу. Для оператора возможны следующие значения:
    1. **in** - проверяет, что бригада находится в диапазоне некоторых статусов. Значения для ключа **value - массив
       int,
       где каждое значение - численный эквивалент статуса из BrigadeStatuses**
    2. **notIn** - проверяет, что бригада не находится в диапазоне некоторых статусов. Значения для ключа **value -
       массив
       int, где каждое значение - численный эквивалент статуса из BrigadeStatuses**
   ```json
   {
            "field": "status",
            "op": "in",
            "value": [1,2,3,4,5]
   }
   ```

2. **city_station** - Фильтрует бригады по городу. Для оператора возможны следующие значения:
    1. **in** - проверяет, что бригада находится в диапазоне некоторых городов. Значения для ключа **value - массив int,
       где
       каждое значение - id города**
    2. **notIn** - проверяет, что бригада не находится в диапазоне некоторых городов. Значения для ключа **value -
       массив
       int, где каждое значение - id города**
    ```json
   {
            "field": "city_station",
            "op": "in",
            "value": [1,2]
   }
   ```

3. **substation** - Фильтрует бригады по подстанции. Для оператора возможны следующие значения:
    1. **in** - проверяет, что бригада находится в диапазоне подстанций. Значения для ключа **value - массив int, где
       каждое
       значение - id подстанции**
    2. **notIn** - проверяет, что бригада не находится в диапазоне подстанций. Значения для ключа **value - массив int,
       где
       каждое значение - id подстанции**
    ```json
   {
            "field": "substation",
            "op": "in",
            "value": [1,2]
   }
   ```

4. **profile** - Фильтрует бригады по профилю. Для оператора возможны следующие значения:
    1. **in** - проверяет, что бригада находится в диапазоне профилей. Значения для ключа **value - массив int, где
       каждое
       значение - id профиля**
    2. **notIn** - проверяет, что бригада не находится в диапазоне профилей. Значения для ключа **value - массив int,
       где
       каждое значение - id профиля**
    ```json
   {
            "field": "profile",
            "op": "in",
            "value": [1,2]
   }
   ```

5. **number** - Фильтрует бригады по номеру. Для оператора возможны следующие значения:
    1. **eq** - проверяет, что номер бригады равен некоторому значению. Значения для ключа **value - string (искомый
       номер бригады)**
    ```json
   {
            "field": "number",
            "op": "eq",
            "value": 123
   }
   ```